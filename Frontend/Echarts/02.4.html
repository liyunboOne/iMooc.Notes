<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Echarts之数据的动态更新</title>
	<link href="./../_libs/bootstrap/css/bootstrap.css" rel="stylesheet">
	<link href="./../_libs/animate/animate.css" rel="stylesheet">
</head>
<body>
	<!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
	<div id="container" style="height: 100%"></div>

	<script src="./../_libs/jQuery/jquery-3.1.0.js"></script>
	<script src="./../_libs/jQuery/jquery-migrate-3.0.0.js"></script>
	<script src="./../_libs/bootstrap/js/bootstrap.js"></script>
	<script src="./../_libs/Echarts/echarts.js"></script>
<script>
	'use strict';

	// let myChart = echarts.init(document.querySelector('#container'));
	// let app     = {};
	// let option  = null;
	// let base    =+ new Date(2017, 6, 3);
	// let oneDay  = 24 * 3600 * 1000;
	// let date    = [];
	
	// let data   = [Math.random() * 150];
	// let now    = new Date(base);

	// function addData(shift) {
	// 	now = [now.getFullYear(), now.getMonth()+1, now.getDate()] . join('/');
	// 	date.push(now);
	// 	data.push((Math.random() - 0.4) * 10, + data[data.length - 1]);

	// 	if (shift) {
	// 		date.shift();
	// 		data.shift();
	// 	}

	// 	now = new Date(+new Date(now) + oneDay);
	// }

	// for (let i = 0; i < 100; i++) {
	// 	addData();
	// }

	// option = {
	// 	xAxis: {
	// 	    type: 'category',
	// 	    boundaryGap: false,
	// 	    data: date
	// 	},
	// 	yAxis: {
	// 	    boundaryGap: [0, '50%'],
	// 	    type: 'value'
	// 	},
	// 	series: [
	// 	    {
	// 	        name:'成交',
	// 	        type:'line',
	// 	        smooth:true,
	// 	        symbol: 'none',
	// 	        stack: 'a',
	// 	        areaStyle: {
	// 	            normal: {}
	// 	        },
	// 	        data: data
	// 	    }
	// 	]
	// };
	
	// setInterval(function() {
	// 	addData(true);
	// 	myChart.setOption({
	// 		xAxis : {
	// 			data : date
	// 		},
	// 		series : [{
	// 			name : '成交',
	// 			data : data
	// 		}]
	// 	});
	// });

	// if (option && typeof option === "object") {
	//     myChart.setOption(option, true);
	// }
	// 
	var dom = document.getElementById("container");
	var myChart = echarts.init(dom);
	var app = {};
	var option = null;
	var base = +new Date(2014, 9, 3);
	var oneDay = 24 * 3600 * 1000;
	var date = [];

	var data = [Math.random() * 150];
	var now = new Date(base);

	function addData(shift) {
	    now = [now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/');
	    date.push(now);
	    data.push((Math.random() - 0.4) * 10 + data[data.length - 1]);

	    if (shift) {
	        date.shift();
	        data.shift();
	    }

	    now = new Date(+new Date(now) + oneDay);
	}

	for (var i = 1; i < 100; i++) {
	    addData();
	}

	option = {
	    xAxis: {
	        type: 'category',
	        boundaryGap: false,
	        data: date
	    },
	    yAxis: {
	        boundaryGap: [0, '50%'],
	        type: 'value'
	    },
	    series: [
	        {
	            name:'成交',
	            type:'line',
	            smooth:true,
	            symbol: 'none',
	            stack: 'a',
	            areaStyle: {
	                normal: {}
	            },
	            data: data
	        }
	    ]
	};

	setInterval(function () {
	    addData(true);
	    myChart.setOption({
	        xAxis: {
	            data: date
	        },
	        series: [{
	            name:'成交',
	            data: data
	        }]
	    });
	}, 500);;
	if (option && typeof option === "object") {
	    myChart.setOption(option, true);
	}











</script>
</body>
</html>